<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_slime</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-2</depth>
  <persistent>0</persistent>
  <parentName>obj_livingthing</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Init

// inherit
event_inherited();

// health
hp = 48 + irandom_range(-8,16);

// attack
attack = 16;
impact_x = 4;
impact_y = 2;

// gravity
grav_personal = (0.85)*(global.grav);

// jump
jump_power = 2.1;

// x friction
frict_x = 0.965;

// ""AI""

thinkState = "default"
thinkTime = 200;
thinkBaseTime = 200;
thinkStun = 160;
thinkVar = 30;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// reset thinkState

thinkState = "default"
thinkTime = 200;
thinkBaseTime = 200;
thinkStun = 160;
thinkVar = 30;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Physics

slime_physics();

if (irandom(99) == 7){
    prts_goo(x+random_range(2,14),y+random_range(6,13),(0.9)*spd_x,-0.4);
}

if (thinkState = "rage" &amp;&amp; irandom(99) &lt; 75){
    prts_goo(x+random_range(2,14),y+random_range(6,13),(0.9)*spd_x,-0.4);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// AI

// check
if (thinkTime &lt; 0){
    thinkTime = thinkBaseTime;
}

if (!onground(x,y))
{
    thinkTime = thinkBaseTime + round(random_range(-thinkVar,thinkVar));
}

// Think

if (keyboard_check_pressed(ord("J")))
{
    slime_jump();
}

if (thinkTime == 0)
{
    slime_jump();
    thinkTime = thinkBaseTime + round(random_range(-thinkVar,thinkVar));
}

// timer
thinkTime -= 1;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// thinkState stuff


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// contact with player

if (place_meeting(x,y,obj_player)){
    // find player
    var player;
    player = instance_place(x,y,obj_player);
    
    var contactdir;
    contactdir = sign(x - player.x);
    if (contactdir == 0) contactdir = 1;
    
    if (player.invuln = false){
        // damage
        with(player) {takeDamage(obj_slime.attack);}
        
        // invulnerable
        player.invuln = true;
        player.alarm[0] = player.invulntime;
        
        // player knockback
        player.spd_x += -impact_x*contactdir;
        player.spd_y += -impact_y;
        
        // slime knockback
        spd_x += (.25)*impact_x*contactdir;
        spd_y += -(.25)*impact_y;
        
        // effects
        repeat(6){
        prts_goo(player.x + 8 + 8*contactdir,player.y+8,0,random_range(-0.5,2));
        }
        
        // ai
        thinkTime = thinkStun + irandom_range(-thinkVar/2,thinkVar/2);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///death

if (dead){
    // explode
    repeat(16){
        prts_goo(x+8,y+8,spd_x*0.5,spd_y*0.5);
    }
    
    var splode;
    splode = instance_create(x+8,y+8,obj_slimesplode);
    
    repeat(irandom_range(3, 9)){
        var goop;
        goop = instance_create(x+8,y+8,obj_goop);
        
        goop.spd_x = spd_x*0.8 + random_range(-1.2,1.2);
        goop.spd_y = spd_y*0.8 + random_range(-1,-3.6);
    }
    
    // sound effect
    var dice;
    dice = irandom_range(1,2);
    switch(dice){
        case(1):
            audio_play_sound(snd_pop1,30,false);
            break;
        case(2):
            audio_play_sound(snd_pop2,30,false);
            break;
    }
    
    // die
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// debug stuff

if (keyboard_check(ord("S")) &amp;&amp; mouse_check_button(mb_left))
{
    x = mouse_x;
    y = mouse_y;
    spd_y = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// debug text


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Sprite

draw_sprite(sprite_index, -1, x, y);

mask_index = s_slime;

if (onground(x,y))
{
    image_speed = 1/60;
}
else
{
    image_speed = 14/60;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// debug text

if (global.debug){
    draw_text(x,y-16,string(hp));
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
